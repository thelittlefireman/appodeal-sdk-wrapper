apply plugin: 'com.android.library'
apply plugin: 'com.github.dcendents.android-maven'

ext {
    artifactVersion = '2.4.8-beta.3'
}

group='com.github.thelittlefireman'
version = artifactVersion

if (android.productFlavors.size() > 0) {
    android.libraryVariants.all { variant ->
        if (variant.name.toLowerCase().contains("debug")) {
            return
        }

        def bundleTask = tasks["bundle${variant.name.capitalize()}"]

        artifacts {
            archives(bundleTask.archivePath) {
                classifier variant.flavorName
                builtBy bundleTask
                name = project.name
            }
        }

    }
}

android {
    compileSdkVersion 28
    buildToolsVersion "28.0.3"
    flavorDimensions "default"

    defaultConfig {
        minSdkVersion 11
        targetSdkVersion 28
        versionCode 1
        versionName artifactVersion
        consumerProguardFiles 'proguard-rules.pro'
        multiDexEnabled true
    }
    defaultPublishConfig "normalRelease"
    productFlavors {
        normal {  }
        optional {
            versionName artifactVersion+'_optional'
        }
    }
}

allprojects {
    repositories {
        jcenter { url "http://jcenter.bintray.com/" }
        google()
        flatDir {
            dirs 'libs-aar'
        }
    }
}

dependencies {

    implementation "com.android.support:multidex:1.0.3"

    //Libs folder
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    optionalImplementation fileTree(dir: 'libs-ops', include: ['*.jar'])

    // --- Native libs ---
    implementation 'com.google.android.gms:play-services-ads:15.0.0'
    implementation 'com.google.android.gms:play-services-location:15.0.0'

    // --- AAR ---
    implementation 'com.squareup.picasso:picasso:2.5.2' //for Inmobi
    implementation name: 'adcolony-3.3.4', ext: 'aar'
    implementation name: 'mobvista-8.11.3-alphab', ext: 'aar'
    implementation name: 'mobvista-8.11.3-common', ext: 'aar'
    implementation name: 'mobvista-8.11.3-interstitial', ext: 'aar'
    implementation name: 'mobvista-8.11.3-interstitialvideo', ext: 'aar'
    implementation name: 'mobvista-8.11.3-mvdownloads', ext: 'aar'
    implementation name: 'mobvista-8.11.3-mvjscommon', ext: 'aar'
    implementation name: 'mobvista-8.11.3-mvnative', ext: 'aar'
    implementation name: 'mobvista-8.11.3-nativeex', ext: 'aar'
    implementation name: 'mobvista-8.11.3-playercommon', ext: 'aar'
    implementation name: 'mobvista-8.11.3-reward', ext: 'aar'
    implementation name: 'mobvista-8.11.3-videocommon', ext: 'aar'
    implementation name: 'mobvista-8.11.3-videofeeds', ext: 'aar'
    implementation name: 'mobvista-8.11.3-videojs', ext: 'aar'
    implementation name: 'ogury-3.0.13', ext: 'aar'

}
